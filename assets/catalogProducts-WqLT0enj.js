import{g as s,a as _,s as h,b as w}from"./main-D57yHfPX.js";import{u as m,a as b}from"./product-cards-Bg8NesNf.js";function E(t,e,r,c,n,a){const o=t,u=Array.from(t);let i={};e.addEventListener("click",()=>{p(i),g(t,i),l(i)}),r.addEventListener("click",()=>{A(a,o,t),p(i),l(i)}),f(n,a,u,"descending"),f(c,a,u,"ascending"),L(i,t)}function g(t,e){t.forEach(r=>{let c=!0;if(e.weight!=="Масса"){const n=parseInt(r.getAttribute("data-weight")),[a,o]=e.weight.split("-").map(Number);(n<a||n>o)&&(c=!1)}if(e.taste!=="Вкус"&&c){const n=r.getAttribute("data-taste");e.taste!==n&&(c=!1)}r.classList.toggle("hidden",!c)})}function A(t,e,r){d(r,".product-filter__current-weight","Масса"),d(r,".product-filter__current-taste","Вкус"),e.forEach(c=>{t.appendChild(c)})}function d(t,e,r){t.forEach(c=>{c.classList.remove("hidden")}),s(e).textContent=r}function p(t){t.weight=s(".product-filter__current-weight").textContent.trim(),t.taste=s(".product-filter__current-taste").textContent.trim()}function f(t,e,r,c=null){t.addEventListener("click",()=>{r.sort((n,a)=>c==="ascending"?parseInt(n.getAttribute("data-price"))-parseInt(a.getAttribute("data-price")):parseInt(a.getAttribute("data-price"))-parseInt(n.getAttribute("data-price"))),r.forEach(n=>{e.appendChild(n)})})}function l(t){const e=new URLSearchParams({weight:t.weight,taste:t.taste});window.history.replaceState(null,null,"?"+e.toString())}function L(t,e){const r=new URLSearchParams(window.location.search);t.weight=r.get("weight"),t.taste=r.get("taste"),g(e,t)}document.addEventListener("DOMContentLoaded",async function(){m(await _(await h(),"products"),s(".product__cards")).forEach(e=>{w(e.swiper,e.prev,e.next,"auto",0)}),b(s(".product__cards"),s(".popup__content"),s(".popup__background-block"),s(".popup__cross")),E(s(".product__card","all"),s(".product-filter__apply-button"),s(".product-filter__cross-button"),s(".product-filter__higher-price"),s(".product-filter__lower-price"),s(".product__cards"))});

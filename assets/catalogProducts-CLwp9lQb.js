import{g as s,a as h,s as w,b as _}from"./main-D3ttXanS.js";import{u as m}from"./use-render-cards-xA2s2149.js";function b(t,e,r,i,n,c){const o=t,u=Array.from(t);let a={};e.addEventListener("click",()=>{f(a),g(t,a),p(a)}),r.addEventListener("click",()=>{E(c,o,t),f(a),p(a)}),l(n,c,u,"descending"),l(i,c,u,"ascending"),A(a,t)}function g(t,e){t.forEach(r=>{let i=!0;if(e.weight!=="Масса"){const n=parseInt(r.getAttribute("data-weight")),[c,o]=e.weight.split("-").map(Number);(n<c||n>o)&&(i=!1)}if(e.taste!=="Вкус"&&i){const n=r.getAttribute("data-taste");e.taste!==n&&(i=!1)}r.classList.toggle("hidden",!i)})}function E(t,e,r){d(r,".product-filter__current-weight","Масса"),d(r,".product-filter__current-taste","Вкус"),e.forEach(i=>{t.appendChild(i)})}function d(t,e,r){t.forEach(i=>{i.classList.remove("hidden")}),s(e).textContent=r}function f(t){t.weight=s(".product-filter__current-weight").textContent.trim(),t.taste=s(".product-filter__current-taste").textContent.trim()}function l(t,e,r,i=null){t.addEventListener("click",()=>{r.sort((n,c)=>i==="ascending"?parseInt(n.getAttribute("data-price"))-parseInt(c.getAttribute("data-price")):parseInt(c.getAttribute("data-price"))-parseInt(n.getAttribute("data-price"))),r.forEach(n=>{e.appendChild(n)})})}function p(t){const e=new URLSearchParams({weight:t.weight,taste:t.taste});window.history.replaceState(null,null,"?"+e.toString())}function A(t,e){const r=new URLSearchParams(window.location.search);t.weight=r.get("weight"),t.taste=r.get("taste"),g(e,t)}document.addEventListener("DOMContentLoaded",async function(){m(await h(await w(),"products"),s(".product__cards")).forEach(e=>{_(e.swiper,e.prev,e.next,"auto",0)}),b(s(".product__card","all"),s(".product-filter__apply-button"),s(".product-filter__cross-button"),s(".product-filter__higher-price"),s(".product-filter__lower-price"),s(".product__cards"))});
